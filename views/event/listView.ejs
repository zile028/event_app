<%- include("../partials/top") %> <%- include("../partials/navbar") %> <%-
include("../partials/sidebar") %>
<!-- ============================================================== -->
<!-- Page wrapper  -->
<!-- ============================================================== -->
<div class="page-wrapper">
  <div class="container col-11 mt-4 mx-5">
    <h2 class="my-5 text-center">Svi događaji</h2>
    <div class="row mx-auto">
      <% events.forEach(evt => { %>
      <div
        class="col-sm-6 col-md-4 col-lg-4 d-flex align-items-center justify-between mb-4 shadow"
      >
        <div class="card w-100 border border-primary p-10 rounded-3">
          <h5
            class="card-title text-decoration-underline m-4 fst-italic text-center fw-bolder text-uppercase font-20 font-italic"
          >
            <%= evt.title; %>
          </h5>
          <% if (evt.thumbnail) { %>
          <img
            src="/<%= evt.thumbnail; %>"
            class="card-img-top img-fluid"
            alt="Naslovna slika"
            style="object-fit: cover; height: 150px"
          />
          <% } %>
          <div class="card-body d-flex flex-column">
            <div class="mb-2">
              <span class="fw-bold">Kreator:</span>
              <% if (evt.user && evt.user.firstName) { %> <%= evt.user.firstName
              %> <%= evt.user.lastName || '' %> <% } else { %>
              <span class="text-muted">Nepoznato</span>
              <% } %>
            </div>
            <hr />
            <%= evt.description; %>
            <p class="card-text mb-1">
              <small
                >Pocetak: <%= dayjs(evt.startAt).format("YYYY-MM-DD"); %></small
              >
            </p>
            <p class="card-text">
              <small>Kraj: <%= dayjs(evt.endAt).format("YYYY-MM-DD"); %></small>
            </p>
          </div>
          <%- include("deleteEventBtn",{user,evt}) %>
        </div>
      </div>
      <% }); %>
    </div>
  </div>
  <!-- PAGINATION -->
  <div class="row my-4">
    <nav class="d-flex justify-content-center w-100">
      <ul class="pagination justify-content-center">
        <% if (page > 1) { %>
        <li class="page-item">
          <a class="page-link" href="?page=<%= page - 1 %>&limit=<%= limit %>"
            >Prethodna</a
          >
        </li>
        <% } else { %>
        <li class="page-item disabled">
          <span class="page-link">Prethodna</span>
        </li>
        <% } %> <% for (let i = 1; i <= totalPages; i++) { %>
        <li class="page-item <%= page === i ? 'active' : '' %>">
          <a class="page-link" href="?page=<%= i %>&limit=<%= limit %>"
            ><%= i %></a
          >
        </li>
        <% } %> <% if (page < totalPages) { %>
        <li class="page-item">
          <a class="page-link" href="?page=<%= page + 1 %>&limit=<%= limit %>"
            >Sljedeća</a
          >
        </li>
        <% } else { %>
        <li class="page-item disabled">
          <span class="page-link">Sljedeća</span>
        </li>
        <% } %>
      </ul>
    </nav>
  </div>
</div>
<%- include("../partials/bottom") %>
