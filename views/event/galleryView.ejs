<%- include("../partials/top") %> <%- include("../partials/navbar") %> <%-
include("../partials/sidebar") %>
<!-- ============================================================== -->
<!-- Page wrapper  -->
<!-- ============================================================== -->
<div class="page-wrapper">
  <!-- ============================================================== -->
  <!-- Bread crumb and right sidebar toggle -->
  <!-- ============================================================== -->
  <div class="page-breadcrumb">
    <div class="row">
      <div class="col-12 d-flex no-block align-items-center">
        <h4 class="page-title">Event gallery</h4>
      </div>
    </div>
  </div>
  <!-- ============================================================== -->
  <!-- End Bread crumb and right sidebar toggle -->
  <!-- ============================================================== -->
  <!-- ============================================================== -->
  <!-- Container fluid  -->
  <!-- ============================================================== -->
  <div class="container-fluid">
    <div class="row">
      <% events.forEach((evt)=> { %>
      <div class="col-md-4 mb-2">
        <div class="card h-100">
          <div class="card-header d-flex justify-content-between">
            <p><%= evt.title; %></p>
            <span>
              <p>Pocetak Eventa</p>
              <%= dayjs(evt.startAt).format("YYYY-MM-DD"); %>
              <p>Kraj Eventa</p>
              <%= dayjs(evt.endAt).format("YYYY-MM-DD"); %>
            </span>
          </div>

          <div class="card-body">
            <% if (evt.thumbnail) { %>
            <img
              src="<%= evt.thumbnail; %>"
              alt="slika"
              class="img-fluid mb-2"
              style="max-height: 150px; object-fit: cover"
            />
            <% } %>
            <span>User:</span>
            <%= evt.user.firstName || 'Nepoznato'; %> <%= evt.user.lastName; %>
            <hr />
            <%= evt.decription; %>
          </div>

          <div class="card-footer"></div>
        </div>
      </div>
      <% }); %>
    </div>
    <!-- ============================================================== -->
    <!-- End Container fluid  -->
    <!-- ============================================================== -->
    <!-- ============================================================== -->
    <!-- footer -->
    <!-- ============================================================== -->
    <!-- PAGINATION -->
    <div class="row my-4">
      <nav class="d-flex justify-content-center w-100">
        <ul class="pagination justify-content-center">
          <% if (page > 1) { %>
          <li class="page-item">
            <a class="page-link" href="?page=<%= page - 1 %>&limit=<%= limit %>"
              >Prethodna</a
            >
          </li>
          <% } else { %>
          <li class="page-item disabled">
            <span class="page-link">Prethodna</span>
          </li>
          <% } %> <% for (let i = 1; i <= totalPages; i++) { %>
          <li class="page-item <%= page === i ? 'active' : '' %>">
            <a class="page-link" href="?page=<%= i %>&limit=<%= limit %>"
              ><%= i %></a
            >
          </li>
          <% } %> <% if (page < totalPages) { %>
          <li class="page-item">
            <a class="page-link" href="?page=<%= page + 1 %>&limit=<%= limit %>"
              >Sljedeća</a
            >
          </li>
          <% } else { %>
          <li class="page-item disabled">
            <span class="page-link">Sljedeća</span>
          </li>
          <% } %>
        </ul>
      </nav>
    </div>

    <!-- ============================================================== -->
    <!-- End footer -->
    <!-- ============================================================== -->
  </div>
</div>
<%- include("../partials/bottom") %>
